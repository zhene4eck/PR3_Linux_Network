# Сети в Linux

## В этом проекте поставлена задача: настроить сети в Linux на виртулаьной машине.

### В рамках задачи изучается:
- Стек протоколов TCP IP
- Адресация
- Маршрутизация


## 1. Стек протоколов TCP IP

Сеть - соединеие компьютеров (2 или более) с помощью каналов связи или оборудования. Данные между компьютерами передаются (по каналам/оборудоваию) с помощью правил. Эти правила задаются стеком протоколов TCP IP. 

## 1.1. Stack
Stack – способ линейной организации данных по принципу last in first out, LIFO или «последним пришёл, первым вышел» (добавлять новые элементы и удалять существующие можно только с вершины). Чем выше элемент находится в пирамиде, тем раньше его заберут. Этим стеки отличаются от очереди (queue) — структуры данных, где первым используется элемент, который появился раньше всех.

### Команды, которые можно использовать со стеками:

- push — добавляет элемент на вершину стека.
- pop — удаляет элемент с вершины стека.
- peek — считывает элемент с вершины стека без его удаления.
- isEmpty — проверяет, пуст ли стек.
- size — возвращает количество элементов в стеке.

### Как используем:
- Реализация отмены. Можем отменить последнее созданное действие в графическом и текстовом редакторе без подъема всей цепочки последоватености (всей хронологии).
- Хранит информацию о вызовах функций и локальных переменных.
- Управление операциями в базах данных.
- Для управления вызовами системных функций и передачей параметров между приложениями и ядром операционной системы.
- Для вычисления выражений, проверки скобок и выполнения других операций.

### Реализация стека:

- С помощью динамического массива – размер которого может увеличиваться или уменьшаться в процессе выполнения программы. Операции добавления (push) и удаления (pop) элементов производятся либо с конца, либо с начала массива. Используется при фиксированном размере и нечастых изменениях стека.

- С помощью связных списков – каждый узел содержит какие-то данные и указатель на предыдущий узел. При добавлении новый элемент становится вершиной стека, а при удалении на вершине оказывается предыдущий элемент. Используем в случае, когда не знаем максимальную величину или хотим часто менять размер стека.

### Стек вызовов:

Стек вызовов — это структура данных, которая управляет вызовами функций во время выполнения программы. Когда компьютер выполняет функцию, и ему нужно переключиться на следущую, он записывает в стек точки перехода (начения переменных, аргументы функций и адрес возврата — то место, куда компьютер должен перейти после окончания подпрограммы). Когда функция выполнена, программа считывает точку перехода (адрес возврата) в стеке, удаляет ее и переходит к основной программе, выполняя ее.

### Переполение стека:

- Рекурсия большой глублины вложенности влияет на аварийное завершение работы (Python до 3000 вызовов).
- Бесконенчые циклы:

      def infinite_loop():
          while True:
              pass
      Вызываем бесконечный цикл
      infinite_loop()

### Стек данных:

Этот вид стеков часто используют для работы с разветвлёнными типами данных: деревьями, графами, XML-документами, JSON-объектами и другими.
Древо: в этом случае мы начинаем с корня и идём так глубоко, как только можем, а потом возвращаемся, чтобы исследовать другую ветвь. И стеки подходят для этого как нельзя лучше:

- Когда мы посещаем узел, мы добавляем его в стек.
- Когда мы хотим вернуться к предыдущему узлу, мы достаём его из стека.

## 1.2. Transmission Control Protocol/Internet Protocol

### **Transmission Control Protocol/Internet Protocol (TCP IP)** – стек протоколов, которые задают правиа: 

**TCP (Transmission Control Protocol)** отвечает за обмен данными. Он управляет их отправкой и следит за тем, чтобы они дошли до получателя в целости.
**IP (Internet Protocol)** отвечает за адресацию. Его задача — связывать друг с другом устройства и нарезать данные на пакеты для удобной отправки. 
Эти два протокола работают в связке: IP строит маршрут, а TCP контролирует, чтобы всё передавалось правильно.

### 7 уровней модели OSI:

Каждый протокол описывает строго ему отведенный набор правил. Также протоколы разделены по уровням функциональности (по модели сетевого взаимодействия OSI - 7 уровней). 
Модель OSI спускеются вниз от прикладного до физического уровня, передает инфомацию на другой компьютер, после подниматся обратно (на компьютере получателя и отправителя). Сначало идет шифрование и передача, а после на компьютере отправителя и получаетля расшифрование информации.

7. Прикладной (Application) layer: Обеспечивает интерфейс между пользователем и сетью (например, картинка, которую мы хотим отправить), работает с приложениями (протоколы HTTP, FTP, SMTP, DNS).

6. Представления (Presentation) layer: Преобразует данные, обеспечивает шифрование, сжатие и кодирование (форматы JPG, GIF, SSL/TLS).

5. Сеансовый (Session) layer: Управляет сеансами связи, устанавливает, поддерживает и завершает диалог между приложениями.

4. Транспортный (Transport) layer: Обеспечивает доставку данных, контролирует ошибки и управляет потоком (протоколы TCP, UDP).
Оба этих протокола отвечают за то, как именно будут передаваться данные. 

- TCP (Transmission Control Protocol) — это протокол, который гарантирует доставку данных в корректном виде. Он жёстко следит за каждым битом информации, но работает гораздо медленнее UDP.
Например, при авторизации в систему, необходимо, чтобы все символы отправились в определённой последовательности. Если какие-то символы потеряются или изменятся, произойдет ошибка авторизации. Поэтому протокол TCP использует разные методы проверок — например, **контрольные суммы**.
- в видео или аудио небольшие потери некритичны, зато важна скорость передачи данных. Для таких задач как раз и придумали протокол UDP (user datagram protocol). Он уже не проверяет цельность битов, его задача — как можно быстрее передать данные с одного устройства на другое.

В протоколе TCP данные делятся на сегменты. Каждый сегмент — часть пакета. Сегменты нужны, чтобы передавать информацию по сети, учитывая её пропускную способность. Может быть компьютер с пропускной с пособностью 100 мб/с, а телефон 10 мб/с. TCP сигментирует информацию так, чтобы кажды сигмент составлял размер пропускной способности другого устройства (10 мб/с), что позволит данным перемещаться без остановки.
Также сигменты составляют надежность – большой пакет может потеряться или отпарвиться не по тому MAC-адресу, при потреле одного из сигментов пакета TCP запросит сегмент снова, а после ддоставит данные получателю.

В UDP данные делятся на датаграммы — аналогично пакетам, однако датаграммы автономны. Каждая датаграмма имеет всё необходимое, чтобы дойти до получателя. Поэтому они не зависят от сети и могут доставляться по разным маршрутам и в произвольном порядке.

3. Сетевой (Network) layer: Отвечает за маршрутизацию и логическую адресацию, выбор пути (IP-адреса, маршрутизаторы).
Маршрутизаторы используют MAC адреса для построения маршрута от одного устройства к другому. MAC-адрес расшифровывается в IP, которые представляют собой пакеты данных (в пакетах лежат IP отправителя и получаеля). 

2. Канальный (Data Link) layer: Обеспечивает передачу данных в физической сети, использует MAC-адреса (коммутаторы, Ethernet). Проверяет целостность полученных данных и проверяет ошибки. На этом уровне утроена четка логика отличичия разных битов (нулей и единиц) благодаря разным амплитудам. Полученные данные с 1 уровня делятся на фреймы, каждый из которых состоит из служебной информации (адрес отправителя, получателя, данные и др..). 

**Структура фрейма: MAC-адрес отправителя -> MAC-адрес получаетеля -> Данные**
MAC-адрес нужен, чтобы идентифицировать устройства в локальной сети, состоит из 48 или 64 бит и выглядит примерно так: 00:1A:2B:3C:4D:5E или 00-1A-2B-3C-4D-5E. Для каждого устройства присваивают определённый MAC-адрес, который потом уже никак нельзя поменять. MAC-адрес настольных ПК зашит в сетевую карту, поэтому его можно изменить, только заменив эту самую карту. 

**Канальный уровеньделится на два подуровня:**
- уровень управления логическим каналом — LLC (logical link control);
- уровень управления доступом к среде — тот самый MAC (media access control).

- первый подуровень нужен для взаимодействия с верхним уровнем, сетевым.
- второй — для взаимодействия с нижним, физическим. 
- устройства канального уровня — коммутаторы и мосты. Они нужны, чтобы передавать фреймы нужному адресату. 
- протоколы канального уровня — PPP, CDP.

1. Физический (Physical) layer: Передает необработанные биты через физическую среду (кабели, Wi-Fi, концентраторы). Полная абстракция (ток, свет, радиоволны)
